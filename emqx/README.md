# EMQX 節點 (emqx1, emqx2, emqx3)

## Cluster 通信:
EMQX 節點之間通過內部網路 (emqx-net) 進行通信，不需要對外暴露端口。
這樣做可以提高安全性，因為外部網路無法直接訪問這些節點，減少了潛在的攻擊面。

## 管理介面:
只有 emqx1 暴露了管理介面端口（18083），因為只需要一個節點提供管理介面即可滿足需求。
用戶可以通過 http://localhost:18083 訪問管理介面來管理整個集群。

## Nginx 服務
Nginx 作為反向代理，負責處理進入的請求並將其分發到適當的 EMQX 節點。以下是 Nginx 暴露多個端口的原因：

### 1883 端口:
用於標準的 MQTT 通訊（未加密）。
外部的 MQTT 客戶端通過這個端口連接到 Nginx，再由 Nginx 轉發到內部的 EMQX 節點。

### 8883 端口:
用於加密的 MQTT 通訊（SSL/TLS）。
提供安全的 MQTT 連接，確保數據在傳輸過程中不被攔截或篡改。

### 8083 端口:
用於 WebSocket 協議的 MQTT 通訊（未加密）。
允許基於 WebSocket 的 MQTT 客戶端連接到 MQTT 服務。

### 8084 端口:
用於加密的 WebSocket 協議的 MQTT 通訊（SSL/TLS）。
提供安全的 WebSocket 連接。

### 8888 端口:
用於 Nginx 的狀態監控。
管理員可以通過這個端口查看 Nginx 的運行狀態和性能指標。

## 總結
EMQX 節點 之間通過內部網路通信，因此 emqx2 和 emqx3 不需要暴露端口。
Nginx 作為反向代理，處理各種不同類型的 MQTT 和 WebSocket 請求，因此需要暴露多個端口來對應不同的協議和加密方式。
這種設計方式確保了內部服務的安全性，同時提供了靈活的外部訪問方式，以滿足不同的應用場景需求。